# Запуск автоматических тестов
1. Склонировать проект **https://github.com/frantzev/diploma.git**
2. Перейти в папку _diploma/artifacts_
3. Выполнить команду `docker-compose up -d`
4. Выполнить команду `java -jar aqa-shop.jar`
5. В новом окне терминала запустить `java -jar -Dspring.profiles.active=postgres aqa-shop.jar`
6. В новом окне терминала перейти в папку _diploma/artifacts/gate-simulator_
7. Выполнить команду `npm start`
8. В новом окне терминала перейти в папку _diploma_
9. Выполнить команду `./gradlew clear test`
10. Выполнить команду после завершения шага 9 `./gradlew allureReport`

# Сценарии UI тестирования

Каждый сценарий выполняется для приложения с url
адрес сервиса и БД **MySQL** и для
для приложения с url
**http://localhost:8081** и БД **PostgreSQL**

## 1. Успешная покупка тура за собственные стредства

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_


### Шаги:
1. Перейти на **адрес сервиса**
2. Нажать на кнопку **Купить**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Месяц** ввести любое число от _01_ до _12_
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
меньше 5 лет от текущей даты.
6. В поле  **Владелец** ввести фамилию и имя через пробел транслитом
7. В поле **CVC/CV** ввести любые три цифры
8. Нажать кнопку  **Продолжить**

### Ожидаемый результат:

1. Отсутствуют сообщения об ошибках
2. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком   
3. В БД в таблице order_entity присутствует запись с 
credit_id = null, created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице payment_entity проверить значение в колонках:
amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
status=APPROVED, id = payment_id order_entity из 3 пункта.    

### Заключтельные действия

Очистить БД выполнив скрипты:

* <code>DELETE FROM app.order_entity;</code>
* <code>DELETE FROM app.payment_entity;</code>

## 2. Успешная покупка тура за счет кредитных средств

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_


### Шаги:
1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить в кредит**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Месяц** ввести любое число от _01_ до _12_
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
6. В поле  **Владелец** ввести фамилию и имя через пробел транслитом
7. В поле **CVC/CV** ввести любые три цифры
8. Нажать кнопку **Продолжить**   

### Ожидаемый результат:

1. Отсутствуют сообщения об ошибках
2. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
3. В БД в таблице order_entity присутствует запись с заполненным
    credit_id и payment_id , created соотвествует текущей дате и времени c небольшим лагом,
4.  В БД в таблице payment_entity проверить значение в колонах:
    amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
    status=APPROVED, id = payment_id order_entity из 3 пункта
5.  В БД в таблице credit_request_entity проверить значение в колонках:
    created соотвествует текущей дате и времени c небольшим лагом,
    status=APPROVED, id = credit_id order_entity из 3 пункта

### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.credit_request_entity;</code>
* <code>DELETE FROM app.order_entity;</code>
* <code>DELETE FROM app.payment_entity;</code>

## 3. Отказ банка при покупке тура за счет кредитных средств

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_


### Шаги:
1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить в кредит**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4442_
4. В поле **Месяц** ввести любое число от _01_ до _12_
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
6. В поле  **Владелец** ввести фамилию и имя через пробел транслитом
7. В поле **CVC/CV** ввести любые три цифры
8. Нажать кнопку  **Продолжить**

### Ожидаемый результат:

1. Появилось окно нотификации с текстом Ошибка Банк отказал в проведении операции!
2. В БД в таблице order_entity присутствует запись с заполненным
   credit_id и payment_id = null , created соотвествует текущей дате и времени c небольшим лагом,
3. В БД в таблице credit_request_entity проверить значение в колонках:
   created соотвествует текущей дате и времени c небольшим лагом,
   status=DECLINED, id = credit_id order_entity из 2 пункта
4. В payment_entity отсутствуют записи  
   

### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.credit_request_entity;</code>
* <code>DELETE FROM app.order_entity;</code>

## 4. Покупка тура за собственые средства с невалидной картой

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_


### Шаги:
1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить**
4. В поле **Месяц** ввести любое число от _01_ до _12_
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
6. В поле  **Владелец** ввести фамилию и имя через пробел транслитом
7. В поле **CVC/CV** ввести любые три цифры
8. Нажать кнопку  **Продолжить**

### Ожидаемый результат:

1. Появилось сообщение об ошибке **Неверный формат** пол полем **Номер карты**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
9. В поле **Номер карты** ввести 15 цифр 
10. Нажать кнопку  **Продолжить**

### Ожидаемый результат:

1. Отсталось сообщение об ошибке **Неверный формат** пол полем **Номер карты**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
10. В поле **Номер карты** попытаться ввести 16 цифр
11. Очистить поле  **Номер карты**
12. В поле **Номер карты** попытаться ввести символы отличные от цифр    

### Ожидаемый результат:
1. При вводе 17 цифры и далее значение в поле **Номер карты** не меняется
2. При вводе символов, отличных от цифр значение в поле **Номер карты** не меняется

### Шаги:
13. В поле **Номер карты** ввести значение 4444 4444 4444 4443
14. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось окно нотификации с текстом Ошибка Банк отказал в проведении операции!
3. В БД в таблице order_entity присутствует запись с
   credit_id = null, created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице payment_entity проверить значение в колонках:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=DECLINED, id = payment_id order_entity из 3 пункта.

### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.payment_entity;</code>
* <code>DELETE FROM app.order_entity;</code>

### Шаги:
15. В поле **Номер карты** ввести значение 4444 4444 4444 4441
16. Нажать кнопку  **Продолжить**

### Ожидаемый результат:

1. Сообщение под полем **Номер карты* **Неверный форма**т исчезло
2. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
3. В БД в таблице order_entity присутствует запись с
   credit_id = null, created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице payment_entity проверить значение в колонках:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта.

### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.payment_entity;</code>
* <code>DELETE FROM app.order_entity;</code>
   

## 5. Покупка тура за собственые средства с невалидным месяцем действия карты

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_

### Шаги:

1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
5. В поле **Владелец** ввести фамилию и имя через пробел транслитом
6. В поле **CVC/CV** ввести любые три цифры
7. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Неверный формат** под полем **Месяц*
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
8. В поле ввести 0
9. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Присутствует сообщение об ошибке **Неверный формат** под полем **Месяц*
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
10. В поле **Месяц** удалить все символы и ввести 13
11. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Присутствует сообщение об ошибке **Неверный формат** пол полем **Месяц*
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверно указан срок действия карты**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
12. В поле **Месяц** удалить все символы и ввести число от 1 до 9
13. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Присутствует сообщение об ошибке **Неверный формат** под полем **Месяц**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
14. В поле **Месяц** удалить все символы и ввести число 12
15. Ввести еще цифру
16. Ввести символы отличные от цифры
17. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. В поле ввода **Месяц** значение 12
2. Пропала сообщение об ошибке  **Неверный формат** под полем **Месяц**
3. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
4. В БД в таблице order_entity присутствует запись с
   credit_id = null, created соотвествует текущей дате и времени c небольшим лагом,
5. В БД в таблице payment_entity проверить значение в колонках:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта.

## 6. Покупка тура за собственые средства с невалидным годом действия карты

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_

### Шаги:

1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Месяц** ввести значение, значение из диапазона 01 до 12
5. В поле **Владелец** ввести фамилию и имя через пробел транслитом
6. В поле **CVC/CV** ввести любые три цифры
7. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Неверный формат** под полем **Год*
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
8. В поле **Год** ввести значение меньше текущего года
9. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Присутствует сообщение об ошибке **Истек срок действия карты** под полем **Год**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Истек срок действия карты**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
10. В поле **Год** удалить все символы и ввести год на 1 больше текущего
11. Ввести еще цифру
12. Ввести символы отличные от цифры
13. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. В поле ввода **Год** значение года на 1 больше текущего
2. Пропала сообщение об ошибке  **Истек срок действия карты** под полем **Год**
3. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
4. В БД в таблице order_entity присутствует запись с
   credit_id = null, created соотвествует текущей дате и времени c небольшим лагом,
5. В БД в таблице payment_entity проверить значение в колонках:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта.

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.payment_entity;</code>
* <code>DELETE FROM app.order_entity;</code>
   

## 7. Покупка тура за собственые средства с невалидным владельцем

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_

### Шаги:

1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Месяц** ввести значение, значение из диапазона 01 до 12
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
6. В поле **CVC/CV** ввести любые три цифры
7. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Поле обязательно для заполнения** под полем **Владелец**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Поле обязательно для заполнения**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

8. В поле **Владелец** ввести символ кроме букв латинского алфавита, -, пробела,' 
9. Нажать кнопку  **Продолжить**
10. Повторить шаги 8, 9 для разных символов и кроме букв латинского алфавита, -, пробела,'

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Неверный формат** под полем **Владелец**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

11. Очистить поле  **Владелец** и ввести фамилию и имя содержащие пробел, -,'
12. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Пропала сообщение об ошибке  **Неверный формат** под полем **Владелец**
2. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
3. В БД в таблице order_entity присутствует запись с
   credit_id = null, created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице payment_entity проверить значение в колонках:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта.

### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.payment_entity;</code>
* <code>DELETE FROM app.order_entity;</code>

13. В поле **Владелец** ввести 26 разрешенных символов
14. В поле **Владелец** ввести еще 1 символ   
15. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. В поле **Владелец** осталось 26 символов
2. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
3. В БД в таблице order_entity присутствует запись с
   credit_id = null, created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице payment_entity проверить значение в колонках:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта.

### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.payment_entity;</code>
* <code>DELETE FROM app.order_entity;</code>

## 8. Покупка тура за собственые средства с невалидным CVC

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_


### Шаги:
1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Месяц** ввести значение, значение из диапазона 01 до 12
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
6. В поле **Владелец** ввести фамилию и имя через пробел транслитом
7. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Неверный формат** под полем **CVC/CVV**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей


8. В поле **CVC/CVV** вести любые символы кроме цифр

### Ожидаемый результат:

1. Поле **CVC/CVV** осталось не заполненным

9. В поле  **CVC/CVV** ввести три цифры
10. В поле **CVC/CVV** ввести еще одну цифру
11. Нажать кнопку  **Продолжить**

1. В поле **CVC/CVV** осталось 3 цифры
2. Пропало сообщение об ошибке  **Неверный формат** под полем **CVC/CVV** 
3. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
4. В БД в таблице order_entity присутствует запись с
   credit_id = null, created соотвествует текущей дате и времени c небольшим лагом,
5. В БД в таблице payment_entity проверить значение в колонках:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта.

## 9. Покупка тура за кредитные средства с невалидной картой

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_


### Шаги:
1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить в кредит**
4. В поле **Месяц** ввести любое число от _01_ до _12_
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
6. В поле  **Владелец** ввести фамилию и имя через пробел транслитом
7. В поле **CVC/CV** ввести любые три цифры
8. Нажать кнопку  **Продолжить**

### Ожидаемый результат:

1. Появилось сообщение об ошибке **Неверный формат** пол полем **Номер карты**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
9. В поле **Номер карты** ввести 15 цифр
10. Нажать кнопку  **Продолжить**

### Ожидаемый результат:

1. Отсталось сообщение об ошибке **Неверный формат** пол полем **Номер карты**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
10. В поле **Номер карты** попытаться ввести 16 цифр
11. Очистить поле  **Номер карты**
12. В поле **Номер карты** попытаться ввести символы отличные от цифр

### Ожидаемый результат:
1. При вводе 17 цифры и далее значение в поле **Номер карты** не меняется
2. При вводе символов, отличных от цифр значение в поле **Номер карты** не меняется

13. Очистить поле **Номер карты**
14. В поле **Номер карты** ввести значение _4444 4444 4444 4443_
15. Нажать кнопку  **Продолжить**

### Ожидаемый результат:

1. Пропало сообщение об ошибке  **Неверный формат** под полем **Номер карты**
2. Появилось окно нотификации с текстом _Ошибка Банк отказал в проведении операции!_
3. В БД в таблице order_entity присутствует запись с заполненным
   credit_id и payment_id = null , created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице credit_request_entity проверить значение в колонках:
   created соотвествует текущей дате и времени c небольшим лагом,
   status=DECLINED, id = credit_id order_entity из 3 пункта
5. В payment_entity отсутствуют записи

### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.credit_request_entity;</code>
* <code>DELETE FROM app.order_entity;</code>


## 10. Покупка тура за кредитные средства с невалидным месяцем действия карты

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_

### Шаги:

1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить в кредит**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
5. В поле **Владелец** ввести фамилию и имя через пробел транслитом
6. В поле **CVC/CV** ввести любые три цифры
7. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Неверный формат** под полем **Месяц*
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
8. В поле ввести 0
9. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Присутствует сообщение об ошибке **Неверный формат** под полем **Месяц*
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
10. В поле **Месяц** удалить все символы и ввести 13
11. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Присутствует сообщение об ошибке **Неверный формат** пол полем **Месяц*
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверно указан срок действия карты**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
12. В поле **Месяц** удалить все символы и ввести число от 1 до 9
13. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Присутствует сообщение об ошибке **Неверный формат** под полем **Месяц**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
14. В поле **Месяц** удалить все символы и ввести число 12
15. Ввести еще цифру
16. Ввести символы отличные от цифры
17. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. В поле ввода **Месяц** значение 12
2. Пропала сообщение об ошибке  **Неверный формат** под полем **Месяц**
3. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
4. В БД в таблице order_entity присутствует запись с заполненным
   credit_id и payment_id , created соотвествует текущей дате и времени c небольшим лагом,
5. В БД в таблице payment_entity проверить значение в колонах:
    amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
    status=APPROVED, id = payment_id order_entity из 4 пункта
6. В БД в таблице credit_request_entity проверить значение в колонках:
   created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = credit_id order_entity из 4 пункта


## 11. Покупка тура за кредитные средства с невалидным годом действия карты

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_

### Шаги:

1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить в кредит**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Месяц** ввести значение, значение из диапазона 01 до 12
5. В поле **Владелец** ввести фамилию и имя через пробел транслитом
6. В поле **CVC/CV** ввести любые три цифры
7. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Неверный формат** под полем **Год*
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
8. В поле **Год** ввести значение меньше текущего года
9. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Присутствует сообщение об ошибке **Истек срок действия карты** под полем **Год**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Истек срок действия карты**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

### Шаги:
10. В поле **Год** удалить все символы и ввести год на 1 больше текущего
11. Ввести еще цифру
12. Ввести символы отличные от цифры
13. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. В поле ввода **Год** значение года на 1 больше текущего
2. Пропала сообщение об ошибке  **Истек срок действия карты** под полем **Год**
3. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
4. В БД в таблице order_entity присутствует запись с заполненным
   credit_id и payment_id , created соотвествует текущей дате и времени c небольшим лагом,
5. В БД в таблице payment_entity проверить значение в колонах:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 4 пункта
6. В БД в таблице credit_request_entity проверить значение в колонках:
   created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = credit_id order_entity из 4 пункта

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.payment_entity;</code>
* <code>DELETE FROM app.order_entity;</code>

## 12. Покупка тура за кредитные средства с невалидным владельцем

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_

### Шаги:

1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить в кредит**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Месяц** ввести значение, значение из диапазона 01 до 12
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
6. В поле **CVC/CV** ввести любые три цифры
7. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Поле обязательно для заполнения** под полем **Владелец**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Поле обязательно для заполнения**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

8. В поле **Владелец** ввести символ кроме букв латинского алфавита, -, пробела,'
9. Нажать кнопку  **Продолжить**
10. Повторить шаги 8, 9 для разных символов и кроме букв латинского алфавита, -, пробела,'

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Неверный формат** под полем **Владелец**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей

11. Очистить поле  **Владелец** и ввести фамилию и имя содержащие пробел, -,'
12. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Пропала сообщение об ошибке  **Неверный формат** под полем **Владелец**
2. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
3. В БД в таблице order_entity присутствует запись с заполненным
   credit_id и payment_id , created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице payment_entity проверить значение в колонах:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта
5. В БД в таблице credit_request_entity проверить значение в колонках:
   created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = credit_id order_entity из 3 пункта

### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.payment_entity;</code>
* <code>DELETE FROM app.order_entity;</code>


13. В поле **Владелец** ввести 26 разрешенных символов
14. В поле **Владелец** ввести еще 1 символ
15. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. В поле **Владелец** осталось 26 символов
2. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
3. В БД в таблице order_entity присутствует запись с заполненным
   credit_id и payment_id , created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице payment_entity проверить значение в колонах:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта
5. В БД в таблице credit_request_entity проверить значение в колонках:
   created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = credit_id order_entity из 3 пункта



### Заключтельные действия

Очистить БД выполнив скрипты:
* <code>DELETE FROM app.payment_entity;</code>
* <code>DELETE FROM app.order_entity;</code>

## 13. Покупка тура за кредитные средства с невалидным CVC

### Предварительные условия:
1. Запущены сервисы **БД** через _docker-compose.yml_
2. Запущены сервисы **gate-simulator** (_app.js_)
3. В **application.properties** указано _spring.datasource.url=jdbc:mysql://localhost:3306/app_
4. Запущено приложение _aqa-shop.jar_


### Шаги:
1. Перейти на  **адрес сервиса**
2. Нажать на кнопку **Купить в кредит**
3. В поле **Номер карты** ввести значение _4444 4444 4444 4441_
4. В поле **Месяц** ввести значение, значение из диапазона 01 до 12
5. В поле **Год** ввести значение, такое что: срок действия больше текущей даты, но
   меньше 5 лет от текущей даты.
6. В поле **Владелец** ввести фамилию и имя через пробел транслитом
7. Нажать кнопку  **Продолжить**

### Ожидаемый результат:
1. Появилось сообщение об ошибке **Неверный формат** под полем **CVC/CVV**
   На форме присутствует span в аттрибуте сlass присутствуеи input_invalid,
   внутри div содержится span с текстом  **Неверный формат**
2. Таблицы order_entity, payment_entity, credit_request_entity не содержат записей


8. В поле **CVC/CVV** вести любые символы кроме цифр

### Ожидаемый результат:

1. Поле **CVC/CVV** осталось не заполненным

9. В поле  **CVC/CVV** ввести три цифры
10. В поле **CVC/CVV** ввести еще одну цифру
11. Нажать кнопку  **Продолжить**

1. В поле **CVC/CVV** осталось 3 цифры
2. Пропало сообщение об ошибке  **Неверный формат** под полем **CVC/CVV**
3. Появилось окно нотификации с текстом Успешно. Операция одобрена Банком
3. В БД в таблице order_entity присутствует запись с заполненным
   credit_id и payment_id , created соотвествует текущей дате и времени c небольшим лагом,
4. В БД в таблице payment_entity проверить значение в колонах:
   amount=45000, created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = payment_id order_entity из 3 пункта
5. В БД в таблице credit_request_entity проверить значение в колонках:
   created соотвествует текущей дате и времени c небольшим лагом,
   status=APPROVED, id = credit_id order_entity из 3 пункта


# Инструменты

### Система сборки и запуска тестов

В качестестве системы сборки и запуска тестов
выбран **Gradle**. Инструмент обладает необходимой 
функциональностью, не нужно тратить время на его изучение.
Если сравнивать с альтернативой **Maven**, то у **Gradle** 
есть инкрементальная сборка и более высокая производительность.


### Управление тестовым окружением

Для управления тестовым оружением выбраны **Docker** 
и **Docker-compose**

Использование docker позволит быстро поднять БД. 
Настройки описываются в одном файле.
Docker-compose позволит поднять обе БД сразу.
Docker и Docker-compose уже изучены, поэтому не будет 
трудозатрат на обучение с нуля.

### Инструмент для UI тестов

Для реализации UI тестов был выбран **Selenide**
Данный инструмент выбан из-за удобного и хорошо документированного API,
наличие необходимой функциональности, стабильности,
минимальных затрат на конфигурирование, наличие опыта в 
применении данного инструмента.

### Инструмент для взаимодействия с базой данных 

Для взаимодействия с БД выбрана библиотека **Apache Commons DbUtils**.
С низким порогом вхождения, хорошо документированная, высокопроиводительная
библиотека. Не требует конфинурирования и легко подключается к проекту.
Имеется опыт работы.


# Риски

В качестве рисков можно отметить:

* изменение требований к тестам со стороны руководителя
* исправление замечаний после ревью
* простои во время проведения ревью
* риски связанные c невозможностью выполнения работы со сторогв исполнителя
  (потерей трудоспособности и т. п.)

Итоговую оценку по затратам предлагается увеличить на 30%.
Здвинуть сроки так же на 30%.

# Затраты
| Номер сценария   |                                Название                                 | Трудозатраты в h |
|:-----------------|:-----------------------------------------------------------------------:|-----------------:|
| 1                |             Успешная покупка тура за собственные стредства              |                8 |
| 2                |             Успешная покупка тура за счет кредитных средств             |                3 |
| 3                |         Отказ банка при покупке тура за счет кредитных средств          |                3 |
| 4                |        Успешная покупка тура за собственные стредства postgresql        |                1 | 
| 5                |         Покупка тура за собственые средства с невалидной картой         |                3 | 
| 6                | Покупка тура за собственые средства с невалидным месяцем действия карты |                3 | 
| 7                |  Покупка тура за собственые средства с невалидным годом действия карты  |                3 | 
| 8                |       Покупка тура за собственые средства с невалидным владельцем       |                3 | 
| 9                |          Покупка тура за собственые средства с невалидным CVC           |                2 | 
| 10               |         Покупка тура за кредитные средства с невалидной картой          |                1 | 
| 11               | Покупка тура за кредитные средства с невалидным месяцем действия карты  |                1 | 
| 12               |  Покупка тура за кредитные средства с невалидным годом действия карты   |                1 | 
| 13               |       Покупка тура за кредитные средства с невалидным владельцем        |                1 | 
| 14               |           Покупка тура за кредитные средства с невалидным CVC           |                1 | 
| Итого:           |                                   34                                    |
| С учетом рисков: |                                   44                                    |

# План сдачи
| Номер | Описание                     | Начало | Завершение |
|:------|:-----------------------------|:------:|-----------:|
| 1     | Подготовка стркутуры проекта | 08.07  |      09.07 |
| 2     | Согласование плана           | 09.07  |      12.07 |
| 3     | Сценарий 1                   | 13.07  |      15.07 |
| 4     | Сценарий 2                   | 13.07  |      15.07 |
| 5     | Сценарий 3                   | 15.07  |      16.07 |
| 6     | Сценарий 4                   | 16.07  |      16.07 |
| 7     | Сценарий 5                   | 17.07  |      18.07 |
| 8     | Сценарий 6                   | 17.07  |      18.07 |
| 9     | Сценарий 7                   | 19.07  |      20.07 |
| 10    | Сценарий 8                   | 20.07  |      21.07 |
| 11    | Сценарий 9                   | 21.07  |      22.07 |
| 12    | Сценарий 10                  | 22.07  |      22.07 |
| 13    | Сценарий 11                  | 22.07  |      23.07 |
| 14    | Сценарий 12                  | 23.07  |      23.07 |
| 15    | Сценарий 13                  | 23.07  |      23.07 |
| 16    | Сценарий 14                  | 23.07  |      24.07 |
| 17    | Исправление зачечаний        | 24.07  |      25.07 |
| 17    | Подготовка и сдача отчета    | 25.07  |      27.07 |
